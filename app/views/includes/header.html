<% var user; %>

<div class="navbar navbar-light bg-light navbar-fixed-bottom">
    <div class="container">
        <div class="navbar-header" style="width:100%;display: flex;">
            <form action="/results" method="GET" class="form-inline" style="flex: 1;display: flex;">
                <a href="/" class="navbar-brand" style="flex: 0;">时光的余热</a>
                <div class="input-group" style="flex: 1;max-width: 300px;padding-right: 10px;">
                    <input type="text" class="form-control" name="q">
                    <span class="input-group-btn" style="margin-left: 10px;">
                        <button class="btn btn-default">搜索</button>
                    </span>
                </div>
            </form>
            <div style="flex: 0;">
                <% if(user && user.nickname){ %>
                <p class="navbar-text navbar-right float-right" style="margin:0;min-width: 200px;">
                    <span>欢迎您，<%= user.nickname %></span>
                    <span>&nbsp;|&nbsp;</span>
                    <a href="/logout" class="navbar-link">登出</a>
                </p>
                <% }else{ %>
                <p class="navbar-text navbar-right float-right">
                    <a href="#" data-toggle="modal" data-target="#signupModal" class="navbar-link">注册</a>
                    <span>&nbsp;|&nbsp;</span>
                    <a href="#" class="navbar-link" data-toggle="modal" data-target="#signinModal">登录</a>
                </p>
                <% } %>
            </div>
        </div>
    </div>
</div>


<div id="signupModal" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <form action="/user/signup" method="POST">
                <div class="modal-header">注册</div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="signupEmail">用户邮箱</label>
                        <input type="text" name="user[email]" id="signupEmail" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="signupNickname">用户昵称</label>
                        <input type="text" id="signupNickname" class="form-control" name="user[nickname]">
                    </div>
                    <div class="form-group">
                        <label for="signupPassword">密码</label>
                        <input type="text" name="user[password]" id="signupPassword" class="form-control">
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default" type="button" data-dismiss="modal">关闭</button>
                    <button class="btn btn-success" type="submit">提交</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div id="signinModal" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <form action="/user/signin" method="POST">
                <div class="modal-header">登录</div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="signinEmail">用户邮箱</label>
                        <input type="text" name="user[email]" id="signinEmail" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="signinPassword">密码</label>
                        <input type="text" name="user[password]" id="signinPassword" class="form-control">
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default" type="button" data-dismiss="modal">关闭</button>
                    <button class="btn btn-success" type="submit">提交</button>
                </div>
            </form>
        </div>
    </div>
</div>

<style>
    .navbar {
        border: 1px solid #eee;
    }
</style>